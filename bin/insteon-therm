#!/usr/bin/env node

'use strict';

var Insteon = require('../').Insteon;
var host = 'COM3';

console.log('Connecting to ' + host);
var gw = new Insteon();

  var cmdDataSet00 = {
    cmd1: '2E',
    cmd2: '00',
    extended: true,
    //crc: true,
    
    exitOnAck: true,
    //userData: ['00','05', '1F']
    
    //userData: ['10','00']
    userData: ['00','08']
  };


gw.on('connect', function () {
  var thermostat = gw.thermostat('32f52b');

  thermostat.on('status', function(status) {
    console.log('Thermostat sent status update', status);
  });

  console.log('Listening ...');
  thermostat.monitor(true).then(

  function() {
    console.log('checking ...');
    gw.directCommand('32f52b', cmdDataSet00);
  });
});

gw.on('close', function() {
  console.log('Connection closed');
});

gw.serial(host);
